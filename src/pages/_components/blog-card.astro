---
import type { CollectionEntry } from "astro:content";
import moment from "moment";

interface Props {
  post: CollectionEntry<"blogs">;
}

const { post } = Astro.props;
const { title, pubDate, image, tags } = post.data;
---

<article class="flex gap-4 rounded-lg border border-zinc-200 dark:border-zinc-800 p-3 hover:bg-zinc-50 dark:hover:bg-zinc-900 transition my-2">
  <!-- Image -->
  <a href={`/blogs/${post.slug}`} class="shrink-0">
    <img
      src={image}
      alt={title}
      class="w-24 h-24 object-cover rounded-md"
      loading="lazy"
    />
  </a>

  <!-- Content -->
  <div class="flex flex-col justify-between">
    <div>
      <a
        href={`/blogs/${post.slug}`}
        class="font-semibold leading-tight hover:underline"
      >
        {title}
      </a>
      <p class="line-clamp-2">{post.data.description}</p>

      <!-- Tags -->
      {tags && (
        <div class="mt-1 flex flex-wrap gap-1">
          {tags.map((tag) => (
            <span class="text-xs bg-zinc-800 text-white px-2 py-0.5 rounded">
              #{tag}
            </span>
          ))}
        </div>
      )}
    </div>

    <!-- Date -->
    <time class="text-xs text-zinc-400 mt-2">
      {moment(pubDate).format("ll")}
    </time>
  </div>
</article>
